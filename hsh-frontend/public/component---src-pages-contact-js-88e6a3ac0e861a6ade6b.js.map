{"version":3,"sources":["webpack:///./src/components/form/contact-form.js","webpack:///./src/pages/contact.js"],"names":["ContactForm","useState","message","setMessage","filed","setFiled","nom","prenom","email","telephone","contact","setContact","handleChange","e","a","target","name","value","useEffect","handleSubmit","preventDefault","window","scrollTo","top","behavior","data","axios","method","url","status","setTimeout","location","pathname","response","label","type","className","onChange","style","cursor","pointerEvents","backgroundColor","onClick","Contact","title","lang","description"],"mappings":"4MAmIeA,EA9HK,WAAO,IAAD,EACQC,mBAAS,MAAhCC,EADe,KACNC,EADM,OAEIF,oBAAS,GAA5BG,EAFe,KAERC,EAFQ,OAGQJ,mBAAS,CACnCK,IAAK,GACLC,OAAQ,GACRC,MAAO,GACPC,UAAW,GACXP,QAAS,KALNQ,EAHe,KAGNC,EAHM,KAWhBC,EAAY,uCAAG,WAAMC,GAAN,eAAAC,EAAA,sEACXH,EAAW,OAAD,UAAMD,IAAN,MAAgBG,EAAEE,OAAOC,MAAOH,EAAEE,OAAOE,MAAzC,KADC,UAGG,KAAhBP,EAAQJ,KACc,KAAnBI,EAAQH,QACU,KAAlBG,EAAQF,OACY,KAApBE,EAAQR,SACc,KAAtBQ,EAAQD,UAPE,gCASPJ,GAAS,GATF,6BAWbA,GAAS,GAXI,2CAAH,sDAelBa,qBAAU,cACP,CAACR,IAEJ,IAAMS,EAAY,uCAAG,WAAMN,GAAN,eAAAC,EAAA,yDACjBD,EAAEO,iBAEkB,KAAhBV,EAAQJ,KACW,KAAnBI,EAAQH,QACU,KAAlBG,EAAQF,OACc,KAAtBE,EAAQD,WACY,KAApBC,EAAQR,QAPK,uBASbmB,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,WACpCrB,EAAW,oCAVE,iCAcbkB,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,WACpCrB,EAAW,oBACLsB,EAAO,CACTnB,IAAKI,EAAQJ,IACbC,OAAQG,EAAQH,OAChBC,MAAyB,KAAlBE,EAAQF,MAAe,OAASE,EAAQF,MAC/CC,UAAWC,EAAQD,UACnBP,QAASQ,EAAQR,SArBR,oBAwBgBwB,IAAM,CAC3BC,OAAQ,OACRC,IAAK,0CACLH,SA3BK,WA6BiB,MA7BjB,OA6BMI,OA7BN,wBA8BL1B,EAAW,kBACX2B,YAAW,WACPT,OAAOU,SAASC,SAAW,MAC5B,KAjCE,8EAqCiB,MAAtB,KAAEC,SAASJ,OACX1B,EAAW,2BACkB,MAAtB,KAAE8B,SAASJ,QAClB1B,EAAW,qEAxCN,2DAAH,sDA8ClB,OACI,oCACI,kBAAC,IAAD,CACID,QAASA,IAEb,8BACI,kBAAC,IAAD,CACIU,aAAcA,EACdI,KAAM,MACNkB,MAAO,MACPC,KAAM,SAEV,kBAAC,IAAD,CACIvB,aAAcA,EACdI,KAAM,SACNkB,MAAO,SACPC,KAAM,SAEV,kBAAC,IAAD,CACIvB,aAAcA,EACdI,KAAM,QACNkB,MAAO,QACPC,KAAM,UAEV,kBAAC,IAAD,CACIvB,aAAcA,EACdI,KAAM,YACNkB,MAAO,YACPC,KAAM,WAEV,yBAAKC,UAAU,kCACX,0CACA,8BAAUpB,KAAK,UAAUqB,SAAUzB,KAEvC,yBACI0B,MAAO,CACHC,OAAQnC,EAAQ,UAAY,gBAGhC,4BACIkC,MAAO,CACHE,cAAepC,EAAQ,GAAK,OAC5BqC,gBAAiBrC,EAAQ,UAAY,WAEzCsC,QAASvB,GALb,e,wBClGLwB,UAhBC,WACZ,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CACIC,MAAM,UACNC,KAAK,KACLC,YAAY,oBAEhB,yBAAKV,UAAU,gBACX,wBAAIA,UAAU,cAAd,WACA,kBAAC,EAAD","file":"component---src-pages-contact-js-88e6a3ac0e861a6ade6b.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Input from './input';\nimport axios from 'axios'\nimport ResponseMessage from './response-message';\n\nconst ContactForm = () => {\n    const [message, setMessage] = useState(null)\n    const [filed, setFiled] = useState(false)\n    const [contact, setContact] = useState({\n        nom: '',\n        prenom: '',\n        email: '',\n        telephone: '',\n        message: '',\n    });\n\n    const handleChange = async e => {\n        await setContact({ ...contact, [e.target.name]: e.target.value })\n        if (\n            contact.nom !== ''\n            && contact.prenom !== ''\n            && contact.email !== ''\n            && contact.message !== ''\n            && contact.telephone !== ''\n        ) {\n            await setFiled(true)\n        } else {\n            setFiled(false)\n        }\n    }\n\n    useEffect(() => {\n    }, [contact]);\n\n    const handleSubmit = async e => {\n        e.preventDefault()\n\n        if (contact.nom === \"\" ||\n            contact.prenom === \"\" ||\n            contact.email === \"\" ||\n            contact.telephone === \"\" ||\n            contact.message === \"\"\n        ) {\n            window.scrollTo({ top: 0, behavior: 'smooth' })\n            setMessage('Merci de remplir tous les champs')\n            return\n        }\n        else {\n            window.scrollTo({ top: 0, behavior: 'smooth' })\n            setMessage('Envoi du message')\n            const data = {\n                nom: contact.nom,\n                prenom: contact.prenom,\n                email: contact.email === \"\" ? 'null' : contact.email,\n                telephone: contact.telephone,\n                message: contact.message\n            }\n            try {\n                const contactRes = await axios({\n                    method: 'POST',\n                    url: 'http://backend.homesafehome.ch/contacts',\n                    data,\n                })\n                if (contactRes.status === 200) {\n                    setMessage('Message envoyé')\n                    setTimeout(() => {\n                        window.location.pathname = '/'\n                    }, 500)\n                    return\n                }\n            } catch (e) {\n                if (e.response.status === 500) {\n                    setMessage('Une erreur est survenue')\n                } else if (e.response.status === 400) {\n                    setMessage(`Merci d'entrer un numéro de téléphone et une adresse email valide`)\n                }\n            }\n        }\n    }\n\n    return (\n        <>\n            <ResponseMessage\n                message={message}\n            />\n            <form>\n                <Input\n                    handleChange={handleChange}\n                    name={'nom'}\n                    label={'Nom'}\n                    type={'text'}\n                />\n                <Input\n                    handleChange={handleChange}\n                    name={'prenom'}\n                    label={'Prenom'}\n                    type={'text'}\n                />\n                <Input\n                    handleChange={handleChange}\n                    name={'email'}\n                    label={'email'}\n                    type={'email'}\n                />\n                <Input\n                    handleChange={handleChange}\n                    name={'telephone'}\n                    label={'Telephone'}\n                    type={'number'}\n                />\n                <div className=\"contactform__message__textarea\">\n                    <label>Message</label>\n                    <textarea name=\"message\" onChange={handleChange} />\n                </div>\n                <div\n                    style={{\n                        cursor: filed ? 'pointer' : 'not-allowed',\n                    }}\n                >\n                    <button\n                        style={{\n                            pointerEvents: filed ? '' : 'none',\n                            backgroundColor: filed ? '#e7205b' : '#c8c8c8'\n                        }}\n                        onClick={handleSubmit}>Envoyer</button>\n                </div>\n            </form>\n        </>\n    );\n};\n\nexport default ContactForm;","import React from 'react';\nimport ContactForm from '../components/form/contact-form';\nimport Layout from \"../components/layout\"\nimport SEO from './../components/seo'\n\nconst Contact = () => {\n    return (\n        <Layout>\n            <SEO\n                title=\"Contact\"\n                lang=\"fr\"\n                description=\"Page de contact\"\n            />\n            <div className=\"page contact\">\n                <h1 className=\"page-title\">Contact</h1>\n                <ContactForm />\n            </div>\n        </Layout>\n    );\n};\n\nexport default Contact;\n"],"sourceRoot":""}